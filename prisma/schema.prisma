generator client {
  provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("POSTGRES_PRISMA_URL")
}

model Settings {
  id         Int      @id @default(autoincrement())
  raceDate   DateTime
  raceName   String?
  weeklyGoal Int      @default(4)
  theme      String   @default("default")
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
}

model Activity {
  id              Int      @id @default(autoincrement())
  stravaId        String   @unique
  type            String
  name            String
  distance        Float
  duration        Int
  avgHeartRate    Int?
  maxHeartRate    Int?
  avgPace         Float?
  calories        Int?
  date            DateTime
  perceivedEffort Int?
  createdAt       DateTime @default(now())
}

model PlannedWorkout {
  id          Int      @id @default(autoincrement())
  weekNumber  Int
  dayOfWeek   Int
  type        String
  distance    Float?
  duration    Int?
  description String
  completed   Boolean  @default(false)
  activityId  Int?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model RunAnalysis {
  id           Int      @id @default(autoincrement())
  activityId   Int      @unique
  summary      String   // Short summary (1-2 sentences)
  insights     String   // Detailed analysis (markdown)
  paceAnalysis String?  // Pacing strategy feedback
  hrAnalysis   String?  // Heart rate zone analysis
  comparison   String?  // Comparison to planned workout
  suggestions  String?  // Improvements for next time
  createdAt    DateTime @default(now())
}
